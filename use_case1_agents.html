<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Epilogue:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap"
        rel="stylesheet">
    <!-- Font Awesome 6 Free (CDN) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="src/output.css">
    <script src="src/typing-animation.js"></script>

    <link rel="icon" type="image/png" href="./assets/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="./assets/favicon/favicon.svg" />
    <link rel="shortcut icon" href="./assets/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="./assets/favicon/site.webmanifest" />
    <title>Agence Ingenia</title>
    <style>
      /* Hide native caret while we render a fake one during typing */
      .hide-caret { caret-color: transparent; }
      
      /* Fade-in animation for messages */
      .fade-in {
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out;
      }
      
      .fade-in.show {
        opacity: 1;
        transform: translateY(0);
      }
      
      /* Staggered fade-in for checklist items */
      .checklist-item {
        opacity: 0;
        transform: translateX(-10px);
        transition: opacity 0.4s ease-out, transform 0.4s ease-out;
      }
      
      .checklist-item.show {
        opacity: 1;
        transform: translateX(0);
      }
    </style>
</head>



<body>
    <script>
// from-emerald-500/90  to-blue-400/90
// from-pink-400 to-orange-300
// from-red-400/90 to-blue-400/90
// from-red-500/70 to-yellow-400/70
// from-slate-500/70 to-indigo-500/80
// from-orange-400/95 to-emerald-500/90
// from-sky-500/80 to-violet-700/80
// style="background-image: url(&quot;https://cdn.loom.com/assets/img/canvas-backgrounds/lightholographic-103bad2138086f9f4628.jpg&quot;); background-size: cover; background-repeat: no-repeat; background-position: center center;"

    </script>
    <!-- Chat UI (Tailwind CSS, HTML only) -->
    <div
        class="min-h-svh p-14 bg-gradient-to-br 
        from-pink-400 to-orange-300
        dark:from-slate-900 dark:to-slate-950 text-slate-900 dark:text-slate-100">
        <div
            class="mx-auto max-w-md h-[90svh]   rounded-2xl border border-slate-200/70 dark:border-slate-700/60 bg-white/95 dark:bg-slate-900/60 backdrop-blur shadow-xl flex flex-col overflow-hidden">
            <!-- Header -->
            <header
                class="flex items-center gap-3 px-4 py-3 border-b border-slate-200/70 dark:border-slate-700/60 bg-white/60 dark:bg-slate-900/60">
                <img src="./assets/ingenia_logo_base.png" alt="Ingenia Logo" class="h-8 w-8 object-contain">
                <div>
                    <p class="font-semibold leading-tight">Votre assistant</p>
                    <p class="text-xs text-slate-500 dark:text-slate-400 leading-tight">En ligne</p>
                </div>
            </header>

            <!-- Messages -->
            <ul class="flex-1 overflow-y-auto px-3  py-4 space-y-3">
                <!-- System -->
                <li class="flex justify-center">
                    <div
                        class="text-xs text-slate-500 dark:text-slate-400 border border-dashed border-slate-300 dark:border-slate-600 rounded-lg px-3 py-1.5">
                        Conversation commencée · 10:00
                    </div>
                </li>

                <!-- Incoming -->
                <li class="max-w-[78%]  fade-in" id="welcomeMsg">
                    <div class="flex items-start gap-2">
                        <div
                            class="h-7 w-7 rounded-full bg-gradient-to-br from-primary to-teal-500 dark:bg-slate-700 flex-shrink-0 flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 -1 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z" />
                            </svg>
                        </div>
                        <div>
                            <div
                                class="rounded-2xl rounded-tl-sm border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-3 py-2 shadow-sm">
                                <p class="text-sm">Bonjour ! Comment puis-je vous aider aujourd’hui ?</p>
                            </div>
                            <time class="mt-1 block text-[11px] text-slate-500 dark:text-slate-400">10:00</time>
                        </div>
                    </div>
                </li>

                <!-- Outgoing -->
                <li class="max-w-[78%] ml-auto  fade-in" id="userMsg">
                    <div class="flex items-start gap-2 justify-end">
                        <div>

                            <div
                                class="rounded-2xl rounded-tr-sm border border-blue-600/30 bg-gradient-to-br from-blue-500/95 to-indigo-500/95 text-white px-3 py-2 shadow-sm">
                                <p class="text-sm">
                                    Analyse les retours clients du mois dernier et extrait cinq points principaux.
                                                             </p>
                            </div>
                            <time
                                class="mt-1 block text-right text-[11px] text-slate-500 dark:text-slate-400">10:00</time>
                        </div>
                        <div
                            class="h-7 w-7 rounded-full bg-blue-500 dark:bg-slate-600 flex-shrink-0 flex items-center justify-center">
                            <i class="fa-solid fa-user text-white text-xs"></i>
                        </div>

                    </div>
                </li>


                <!-- Incoming (multi) -->
                <li class="max-w-[78%] fade-in" id="loading">
                    <div class="flex items-start gap-2">
                        <div
                            class="h-7 w-7 rounded-full bg-gradient-to-br from-primary to-teal-500 dark:bg-slate-700 flex-shrink-0 flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 -1 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z" />
                            </svg>
                        </div>
                        <div>
                            <div
                                class="rounded-2xl rounded-tl-sm border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-3 py-2 shadow-sm">
                                <div class="flex items-center space-x-2">
                                    <div class="flex space-x-1 py-1">
                                        <div class="w-[6px] h-[6px] bg-slate-400 rounded-full animate-bounce"></div>
                                        <div class="w-[6px] h-[6px] bg-slate-400 rounded-full animate-bounce"
                                            style="animation-delay: 0.1s"></div>
                                        <div class="w-[6px] h-[6px] bg-slate-400 rounded-full animate-bounce"
                                            style="animation-delay: 0.2s"></div>
                                    </div>
                                </div>
                            </div>

                        </div>
                       

                        <!-- Checklist Message -->




                </li>
                <li class="max-w-[78%]  fade-in" id="msg_bot">
                    <div class="flex items-start gap-2">
                        <div
                            class="h-7 w-7 rounded-full bg-gradient-to-br from-primary to-teal-500 dark:bg-slate-700 flex-shrink-0 flex items-center justify-center">
                            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 -1 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                    d="M18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z" />
                            </svg>
                        </div>
                        <div
                            class="rounded-2xl  rounded-tl-sm border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-3 pr-5 py-2 pb-3 shadow-sm">
                            <div class="space-y-2">
                                <p class="text-sm font-medium text-slate-700 dark:text-slate-300 ">Plan d'action :</p>
                                                                 <ul class="space-y-2">
                                     <li class="flex items-center space-x-3 checklist-item" style="transition-delay: 0.1s">
                                         <div class="w-4 h-4 border border-slate-400 rounded-full flex-shrink-0"></div>
                                         <span class="text-sm text-slate-600 dark:text-slate-400">
                                            Collecter les retours clients du mois dernier</span>
                                     </li>
                                     <li class="flex items-start space-x-3 checklist-item" style="transition-delay: 0.2s">
                                         <div class="w-4 h-4 border border-slate-400 rounded-full flex-shrink-0"></div>
                                         <span class="text-sm text-slate-600 dark:text-slate-400">Analyser les données recueillies</span>
                                     </li>
                                     <li class="flex items-center space-x-3 checklist-item" style="transition-delay: 0.3s">
                                         <div class="w-4 h-4 border border-slate-400 rounded-full flex-shrink-0"></div>
                                         <span class="text-sm text-slate-600 dark:text-slate-400">Rédiger le rapport final</span>
                                     </li>
                                    
                                 </ul>
                            </div>
                        </div>
                </li>
                <li class="max-w-[78%]  fade-in" id="executing">
                    <div class="flex items-start gap-2">
                        <div class="h-7 w-7 opacity-0 rounded-full">
                        </div>
                        <div class="space-y-1.5 ">

                            <div
                                class="rounded-2xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-3 py-2 shadow-sm">
                                <div class="flex  items-center justify-center space-x-4 ">
                                    <p class="text-sm text-slate-500 dark:text-slate-400">En cours d'exécution...</p>

                                    <div class="relative h-5 w-5">
                                        <!-- Glow -->
                                        <div class="absolute inset-0 rounded-full blur-md bg-[#4ab685]/40"></div>
                                        <!-- Spinner -->
                                        <div
                                            class="relative h-full w-full rounded-full
                                                   [background:conic-gradient(from_0deg,transparent_0_65%,#4ab685_80%_100%)]
                                                   animate-spin-150 
                                                   before:absolute before:inset-[15%] before:bg-slate-50 before:rounded-full">
                                        </div>
                                    </div>

                                </div>
                                <style>
                                    @keyframes spin-150 {
                                        to {
                                            transform: rotate(360deg);
                                        }
                                    }

                                    .animate-spin-150 {
                                        animation: spin-150 1s linear infinite;
                                    }
                                </style>
                            </div>
                            <time class="block text-[11px] text-slate-500 dark:text-slate-400">10:01</time>
                        </div>
                    </div>

                </li>
            </ul>

            <!-- Composer -->
            <div
                class="border-t border-slate-200/70 dark:border-slate-700/60 bg-white/70 dark:bg-slate-900/60 px-3 py-3">
                <div class="flex items-center gap-2">
                    <div class="relative flex-1 ">
                        <textarea rows="2" id="userInput" placeholder="Type your message..."
                            class="block w-full resize-none rounded-xl border border-slate-300 dark:border-slate-600 bg-white/90 dark:bg-slate-900/80 px-3 py-2 pr-12 text-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/60 focus:border-blue-500/60"></textarea>

                    </div>
                    <button type="button"
                        class="inline-flex items-center justify-center whitespace-nowrap rounded-xl  bg-primary px-4 py-2 text-sm font-medium text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/60">
                        Envoyer
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- tiny utilities ---
        const $ = (id) => document.getElementById(id);
         const show = (id) => {
           const el = $(id);
           el.classList.remove('hidden');
           // Trigger fade-in animation
           setTimeout(() => {
             el.classList.add('show');
             // Trigger checklist item animations if they exist
             const checklistItems = el.querySelectorAll('.checklist-item');
             checklistItems.forEach((item, index) => {
               setTimeout(() => item.classList.add('show'), index * 100);
             });
           }, 10);
         };
         const hide = (id) => $(id).classList.add('hidden');
        const sleep = (ms) => new Promise(res => setTimeout(res, ms));
    
        async function typeInto(el, text, speed = 35) {
          el.focus();
          el.classList.add('hide-caret');
          let typed = "";
          let caretOn = true;
          const caretChar = '|'; // change to '▍' if you want a thicker caret
          const render = () => {
            el.value = typed + (caretOn ? caretChar : '');
            // keep the viewport scrolled to the end so the caret stays visible
            try { el.setSelectionRange(el.value.length, el.value.length); } catch (_) {}
            el.scrollLeft = el.scrollWidth;
          };

          // start blinking
          const blink = setInterval(() => {
            caretOn = !caretOn;
            render();
          }, 500);

          try {
            el.value = "";
            for (let i = 0; i < text.length; i++) {
              typed += text[i];
              render();
              await sleep(speed);
            }
          } finally {
            clearInterval(blink);
            caretOn = false;
            el.value = typed; // remove fake caret
            try { el.setSelectionRange(el.value.length, el.value.length); } catch (_) {}
            el.scrollLeft = el.scrollWidth;
            el.classList.remove('hide-caret');
          }
        }
    
        /**
         * Simulate one interaction:
         * - type into textarea
         * - wait before sending (2s default)
         * - clear textarea
         * - show submitted message div (you can also inject the text into it)
         * - show loading
         * - hide loading
         * - show next/result div
         */
        async function simulateInteraction({
          inputId,            // textarea id
          messageId,          // div that represents user's submitted message
          loadingId,          // loading div
          nextId,             // final/result div
          executingId,        // executing div
          welcomeMsg,       // welcome message div
          text,               // what to type
          typingSpeed = 1000,   // ms per char
          delays = { beforeSend: 2000, afterSubmit: 250, loading: 2000, afterLoading: 200 , afterAction: 500 }
        }) {
          const inputEl = $(inputId);
          const messageEl = $(messageId);

          // reset visibility (idempotent)
          [messageId, loadingId, nextId, executingId, welcomeMsg].forEach(hide);
    
          await sleep(1000);
          show(welcomeMsg);
          // 1) type into textarea
          await sleep(1000);
          await typeInto(inputEl, text, typingSpeed);
          await sleep(delays.beforeSend ?? 2000);

          // 2) "submit": copy text to message div, clear textarea
          // messageEl.textContent = inputEl.value;
          inputEl.value = "";
    
          // 3) show submitted message
          show(messageId);
          await sleep(delays.afterSubmit ?? 250);
    
          // 4) show loading
          show(loadingId);
          await sleep(delays.loading ?? 1200);
    
          // 5) hide loading, show next/result
          hide(loadingId);
          show(nextId);
          await sleep(delays.afterLoading ?? 200);

          // 6) show executing
          show(executingId);
          await sleep(delays.afterAction ?? 500);

          
        }
    
        // --- Example usage ---
        // Run once the page is ready:
        window.addEventListener('DOMContentLoaded', async () => {
          // Kick off the animation
          simulateInteraction({
            inputId: 'userInput',
            messageId: 'userMsg',
            loadingId: 'loading',
            nextId: 'msg_bot',
            executingId: 'executing',
            welcomeMsg: 'welcomeMsg',
            text: "Analyse les retours clients du mois dernier et extrait cinq points principaux.",
            typingSpeed: 30,
            delays: { beforeSend: 2000, afterSubmit: 1000, loading: 2500, afterLoading: 1000, afterAction: 500 }
          });
        });
    
        // --- Optional: chain multiple interactions ---
        // You can await simulateInteraction(...) and call it again with different IDs/texts
        // to stage a longer scripted conversation.
      </script>
</body>

</html>